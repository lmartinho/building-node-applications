<html>
<head>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
</head>
<body>
	<a href="#/certificates/1">Certificates</a>
	<a href="#certificates/1">Certificates</a>
	<a href="example-3-5.html/certificates/1">Certificates</a>
	
	<div id="certificate"></div>

	<script type="text/template" id="tpl-certificate">
		<h1><%= name %></h1>
		<p>DOB: <%= dob %>
	</script>
	<script type="text/javascript">
		var CertificateView = Backbone.View.extend({
			template: _.template($('#tpl-certificate').html()),

			initialize: function() {
				this.render();
			},

			render: function() {
				var templateArgs = {
					name: "Luís Martinho",
					dob: "August 6, 1984"
				};

				$(this.el).html(this.template(templateArgs));
			}
		});

		var MyRouter = Backbone.Router.extend({
			routes: {
				// barra no início vai depender se está a ser servido (http:// precisa barra) ou está a ser aberto (file:/// não precisa de barra)
				"/certificates/:id" : "getCertificate",
			},

			getCertificate: function(id) {
				console.warn("routed to getCertificate");
				new CertificateView({el : $("#certificate")});
			}
		});

		var router = new MyRouter;

		Backbone.history.start();
	</script>
</body>
</html>